{"version":3,"file":"JobList-Dus198wk.js","sources":["../../../.svelte-kit/adapter-node/chunks/JobList.js"],"sourcesContent":["import { Q as store_get, P as escape_html, R as unsubscribe_stores, W as bind_props, O as pop, K as push, T as ensure_array_like } from \"./index.js\";\nimport { p as page } from \"./stores.js\";\nimport { g as goto } from \"./client.js\";\nimport { a as appApi } from \"./app.api.js\";\nimport { P as PAGINATION } from \"./common.js\";\nimport { p as pathAdmin } from \"./path.admin.js\";\nimport { w as writable } from \"./index3.js\";\nimport { P as Pagination } from \"./Pagination.js\";\nimport { M as Modal } from \"./Modal.js\";\nimport { f as fallback } from \"./utils.js\";\nimport { a as addToast } from \"./notification.js\";\nimport { p as path } from \"./path.js\";\nimport { a as attr } from \"./attributes.js\";\nfunction JobCard($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let fetchData = fallback($$props[\"fetchData\"], () => {\n  });\n  let job = $$props[\"job\"];\n  const isAdmin = store_get($$store_subs ??= {}, \"$page\", page).url.pathname.includes(\"admin\");\n  let isModalOpen = writable(false);\n  const closeModal = () => isModalOpen.set(false);\n  const handleDelete = async (id) => {\n    const response = await appApi.deleteJob(id);\n    if (\"error\" in response) {\n      addToast({ message: response.error, type: \"error\" });\n      return;\n    }\n    fetchData();\n    addToast({\n      message: \"Job deleted successfully\",\n      type: \"success\"\n    });\n  };\n  Modal($$payload, {\n    action: () => {\n      handleDelete(job.id);\n    },\n    isOpen: store_get($$store_subs ??= {}, \"$isModalOpen\", isModalOpen),\n    closeModal,\n    children: ($$payload2) => {\n      $$payload2.out += `<h2 class=\"text-xl font-semibold\">Confirm Delete</h2> <p>Are you sure you want to delete this job ?</p>`;\n    },\n    $$slots: { default: true }\n  });\n  $$payload.out += `<!----> <div class=\"bg-white rounded-lg shadow-md overflow-hidden\"><div class=\"bg-gray-900 p-4 flex justify-between items-center\"><h2 class=\"text-lg text-white font-semibold\">${escape_html(job.job)} - ${escape_html(job.place)}</h2> <span class=\"bg-red-600 text-white px-2 py-1 rounded text-sm\">${escape_html(job.spot)}</span></div> <div class=\"p-4\"><div class=\"mb-2\"><p class=\"font-semibold\">Salary: ${escape_html(job.salary)}</p> <p>Estimated LC Filing Date: ${escape_html(job.estimatedFilingDate)}</p> <p>${escape_html(job.place)}</p></div> `;\n  if (isAdmin) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<div class=\"flex gap-2\"><a${attr(\"href\", pathAdmin.job.edit(String(job.id)))} class=\"theme-btn !bg-blue-500 !rounded-lg px-4 py-2 mt-4 line-height\"><span>Edit</span></a> <button class=\"theme-btn !rounded-lg px-4 py-2 mt-4 line-height\"><span>Delete</span></button></div>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n    $$payload.out += `<div class=\"text-right\"><a${attr(\"href\", path.job.detail(job.id))} class=\"text-blue-600 hover:underline\">Read More</a></div>`;\n  }\n  $$payload.out += `<!--]--></div></div>`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  bind_props($$props, { fetchData, job });\n  pop();\n}\nfunction JobList($$payload, $$props) {\n  push();\n  var $$store_subs;\n  store_get($$store_subs ??= {}, \"$page\", page).url.searchParams.get(\"page\") ?? PAGINATION.DEFAULT_PAGE;\n  store_get($$store_subs ??= {}, \"$page\", page).url.searchParams.get(\"limit\") ?? PAGINATION.DEFAULT_LIMIT;\n  let jobs = writable([]);\n  const isAdmin = store_get($$store_subs ??= {}, \"$page\", page).url.pathname.includes(\"admin\");\n  let totalPages = writable(0);\n  let totalJobs = writable(0);\n  let isLoading = writable(true);\n  const fetchJobs = async ({ page: page2, limit, search }) => {\n    isLoading.set(true);\n    try {\n      const data = await appApi.getJobs({ page: page2, limit });\n      totalPages.set(data.totalPages);\n      totalJobs.set(data.totalJobs);\n      jobs.set(data.jobs);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      isLoading.set(false);\n    }\n  };\n  const handlePageChange = async (page2) => {\n    await goto();\n  };\n  const each_array = ensure_array_like(store_get($$store_subs ??= {}, \"$jobs\", jobs));\n  $$payload.out += `<main class=\"container mx-auto p-2 md:px-4 md:!py-[40px]\"><div class=\"mb-6\"><div class=\"flex gap-4 items-center\"><h1 class=\"!text-[16px] md:!text-[32px] font-bold\">Current offerings</h1> `;\n  if (isAdmin) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<a${attr(\"href\", pathAdmin.job.add())} class=\"theme-btn !bg-blue-500 !rounded-lg px-4 py-2 line-height\"><span>Add Job +</span></a>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--></div> `;\n  if (!isAdmin) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<p class=\"text-sm text-gray-600\">Please choose an offering below. If you have any questions please reach out to our staff through the chat button below. The Estimated Open Date is the estimated date in which the employer will be able to file your Labor Certification application - this date can change slightly.</p>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--></div> <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\"><!--[-->`;\n  for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n    let job = each_array[$$index];\n    JobCard($$payload, {\n      fetchData: () => {\n        fetchJobs({ page: 1, limit: 10 });\n      },\n      job\n    });\n  }\n  $$payload.out += `<!--]--></div> <div class=\"my-4\">`;\n  Pagination($$payload, {\n    totalPages: store_get($$store_subs ??= {}, \"$totalPages\", totalPages),\n    onPageChange: handlePageChange\n  });\n  $$payload.out += `<!----></div></main>`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  JobList as J\n};\n"],"names":[],"mappings":"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"}