import"./disclose-version.Bg9kRutz.js";import{p as H,f as et,n as at,s as i,c as e,r as t,t as O,a as K,o as st,l as E,m as q}from"./runtime.BrVA7zyZ.js";import{a as m,t as c}from"./template.CFDxphtj.js";import{i as G}from"./if.4zbzKaPF.js";import{e as ot,i as rt}from"./each.DskYLrEO.js";import{s as S}from"./attributes.DD7GGYj-.js";import{s as Q,a as A}from"./store.BskVr1ja.js";import{p as V}from"./stores.DV6Sv-0L.js";import{g as it}from"./entry.DqrsjDor.js";import{a as W}from"./app.api.DgA1jBZw.js";import{P as R}from"./common.DSOvOkNr.js";import{p as X}from"./path.admin.FjXmaQqh.js";import{w as j}from"./index.CvdT8md8.js";import{P as lt}from"./Pagination.jpQgAJP9.js";import"./legacy.CtaTdtmd.js";import{M as nt}from"./Modal.BXu6cGzj.js";import{s as w}from"./render.B2FVyqgN.js";import{e as dt}from"./events.0BlegxR4.js";import{i as pt}from"./lifecycle.Dai50P1c.js";import{p as z}from"./props.D51fi5vX.js";import{a as B}from"./notification.DGA-5bOR.js";import{p as mt}from"./path.D46J8i4w.js";var ct=c('<h2 class="text-xl font-semibold">Confirm Delete</h2> <p>Are you sure you want to delete this job ?</p>',1),vt=c('<div class="flex gap-2"><a class="theme-btn !bg-blue-500 !rounded-lg px-4 py-2 mt-4 line-height"><span>Edit</span></a> <button class="theme-btn !rounded-lg px-4 py-2 mt-4 line-height"><span>Delete</span></button></div>'),gt=c('<div class="text-right"><a class="text-blue-600 hover:underline">Read More</a></div>'),ft=c('<!> <div class="bg-white rounded-lg shadow-md overflow-hidden"><div class="bg-gray-900 p-4 flex justify-between items-center"><h2 class="text-lg text-white font-semibold"> </h2> <span class="bg-red-600 text-white px-2 py-1 rounded text-sm"> </span></div> <div class="p-4"><div class="mb-2"><p class="font-semibold"> </p> <p> </p> <p> </p></div> <!></div></div>',1);function ht(T,b){H(b,!1);const v=Q(),_=()=>A(V,"$page",v),I=()=>A(g,"$isModalOpen",v);let F=z(b,"fetchData",8,()=>{}),s=z(b,"job",8);const D=_().url.pathname.includes("admin");let g=j(!1);const J=()=>g.set(!0),M=()=>g.set(!1),N=async p=>{const r=await W.deleteJob(p);if("error"in r){B({message:r.error,type:"error"});return}F()(),B({message:"Job deleted successfully",type:"success"})};pt();var x=ft(),y=et(x);nt(y,{action:()=>{N(s().id)},get isOpen(){return I()},closeModal:M,children:(p,r)=>{var u=ct();at(2),m(p,u)},$$slots:{default:!0}});var L=i(y,2),n=e(L),d=e(n),$=e(d);t(d);var C=i(d,2),k=e(C,!0);t(C),t(n);var f=i(n,2),h=e(f),P=e(h),o=e(P);t(P);var a=i(P,2),U=e(a);t(a);var l=i(a,2),Y=e(l,!0);t(l),t(h);var Z=i(h,2);G(Z,()=>D,p=>{var r=vt(),u=e(r);O(()=>S(u,"href",X.job.edit(String(s().id))));var tt=i(u,2);t(r),dt("click",tt,()=>J()),m(p,r)},p=>{var r=gt(),u=e(r);O(()=>S(u,"href",mt.job.detail(s().id))),t(r),m(p,r)}),t(f),t(L),O(()=>{w($,`${s().job??""} - ${s().place??""}`),w(k,s().spot),w(o,`Salary: ${s().salary??""}`),w(U,`Estimated LC Filing Date: ${s().estimatedFilingDate??""}`),w(Y,s().place)}),m(T,x),K()}var ut=c('<a class="theme-btn !bg-blue-500 !rounded-lg px-4 py-2 line-height"><span>Add Job +</span></a>'),bt=c('<p class="text-sm text-gray-600">Please choose an offering below. If you have any questions please reach out to our staff through the chat button below. The Estimated Open Date is the estimated date in which the employer will be able to file your Labor Certification application - this date can change slightly.</p>'),_t=c('<main class="container mx-auto p-2 md:px-4 md:!py-[40px]"><div class="mb-6"><div class="flex gap-4 items-center"><h1 class="!text-[16px] md:!text-[32px] font-bold">Current offerings</h1> <!></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <div class="my-4"><!></div></main>');function qt(T,b){H(b,!0);const v=Q(),_=()=>A(V,"$page",v),I=()=>A(g,"$jobs",v),F=()=>A(M,"$totalPages",v);let s=q(()=>_().url.searchParams.get("page")??R.DEFAULT_PAGE),D=q(()=>_().url.searchParams.get("limit")??R.DEFAULT_LIMIT),g=j([]);const J=_().url.pathname.includes("admin");let M=j(0),N=j(0),x=j(!0);const y=async({page:o,limit:a,search:U})=>{x.set(!0);try{const l=await W.getJobs({page:o,limit:a});M.set(l.totalPages),N.set(l.totalJobs),g.set(l.jobs)}catch(l){console.log(l)}finally{x.set(!1)}},L=async o=>{await it(`?page=${o}&limit=${E(D)}`)};st(()=>{y({page:Number(E(s)),limit:Number(E(D))})});var n=_t(),d=e(n),$=e(d),C=i(e($),2);G(C,()=>J,o=>{var a=ut();O(()=>S(a,"href",X.job.add())),m(o,a)}),t($);var k=i($,2);G(k,()=>!J,o=>{var a=bt();m(o,a)}),t(d);var f=i(d,2);ot(f,5,I,rt,(o,a)=>{ht(o,{fetchData:()=>{y({page:1,limit:10})},get job(){return E(a)}})}),t(f);var h=i(f,2),P=e(h);lt(P,{get totalPages(){return F()},onPageChange:L}),t(h),t(n),m(T,n),K()}export{qt as J};
