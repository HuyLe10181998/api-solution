import"../chunks/disclose-version.Bg9kRutz.js";import{p as q,f as Q,n as W,s,c as a,r as e,t as w,a as z,l as M,o as X,b as Z,d as tt,m as et}from"../chunks/runtime.BrVA7zyZ.js";import{a as N,t as F}from"../chunks/template.CFDxphtj.js";import{e as at,i as st}from"../chunks/each.DskYLrEO.js";import{s as Y,r as ot}from"../chunks/attributes.DD7GGYj-.js";import{b as rt}from"../chunks/input.C9360sI4.js";import{s as H,a as D}from"../chunks/store.BskVr1ja.js";import{g as lt}from"../chunks/entry.vmupUvN3.js";import{p as nt}from"../chunks/stores.BhmepOUu.js";import{a as J}from"../chunks/app.api.DJYTDj_q.js";import"../chunks/legacy.CtaTdtmd.js";import{s as L}from"../chunks/render.B2FVyqgN.js";import{e as it}from"../chunks/events.0BlegxR4.js";import{i as pt}from"../chunks/lifecycle.Dai50P1c.js";import{p as R}from"../chunks/props.D51fi5vX.js";import{p as j}from"../chunks/path.admin.FjXmaQqh.js";import{M as ct}from"../chunks/Modal.BXu6cGzj.js";import{w as x}from"../chunks/index.CvdT8md8.js";import{a as V}from"../chunks/notification.DGA-5bOR.js";import{d as dt}from"../chunks/dayjs.min.lVgWzJct.js";import{P as mt}from"../chunks/Pagination.l_mtDf7V.js";import{P as C}from"../chunks/common.Chk20Gqn.js";import{g as k}from"../chunks/store.BTY2ED_9.js";import{o as gt}from"../chunks/index-client.DUrKnxgh.js";var ut=F('<h2 class="text-xl font-semibold">Confirm Delete</h2> <p>Are you sure you want to delete this blog ?</p>',1),ft=F('<!> <div class="single-blog-post max-w-[500px]"><div class="post-content"><div class="flex gap-4"><span><i class="fal fa-comments mr-2"></i> </span> <span><i class="fal fa-calendar-alt mr-2"></i> </span></div> <h2 class="text-xl"><a> </a></h2> <p> </p> <div class="flex gap-2"><a class="theme-btn !bg-blue-500 !rounded-lg px-4 py-2 mt-4 line-height"><span>Edit</span></a> <button class="theme-btn !rounded-lg px-4 py-2 mt-4 line-height"><span>Delete</span></button></div></div></div>',1);function vt(g,i){q(i,!1);const r=H(),u=()=>D(_,"$isModalOpen",r);let S=R(i,"fetchData",8,()=>{}),l=R(i,"blog",8),_=x(!1);const G=()=>_.set(!0),T=()=>_.set(!1),I=async n=>{const U=await J.deleteBlog(n);if("error"in U){V({message:U.error,type:"error"});return}S()(),V({message:"Blog deleted successfully",type:"success"})};pt();var P=ft(),A=Q(P);ct(A,{action:()=>{I(l().id)},get isOpen(){return u()},closeModal:T,children:(n,U)=>{var K=ut();W(2),N(n,K)},$$slots:{default:!0}});var $=s(A,2),p=a($),f=a(p),v=a(f),B=s(a(v),1,!0);e(v);var b=s(v,2),y=s(a(b),1,!0);w(()=>L(y,dt(l().date).format("DD MMMM YYYY"))),e(b),e(f);var c=s(f,2),h=a(c);w(()=>Y(h,"href",j.blog.edit(String(l().id))));var E=a(h,!0);e(h),e(c);var d=s(c,2),O=a(d,!0);e(d);var t=s(d,2),o=a(t);w(()=>Y(o,"href",j.blog.edit(String(l().id))));var m=s(o,2);e(t),e(p),e($),w(()=>{L(B,l().author),L(E,l().title),L(O,l().description)}),it("click",m,()=>G()),N(g,P),z()}function bt(g,i){const r=x(g);return gt(()=>{let u=setTimeout(()=>{r.set(g)},i);return console.log("debouncedValue:",r),()=>{clearTimeout(u)}}),r}var ht=F('<div class="p-8"><div class="flex gap-4 mb-8 justify-center"><h1 class="!text-4xl text-center">Blog List</h1></div> <div class="flex gap-2 max-w-[600px] mx-auto mb-8"><input type="text" class="flex-1 rounded-md p-2 svelte-1n2sg7j" placeholder="Search..."> <button class="bg-blue-500 min-w-[120px] hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded"><a class="text-neutral-50">Add blog +</a></button></div> <div class="flex flex-wrap gap-8"></div> <!></div>');function Vt(g,i){q(i,!0);const r=H(),u=()=>D(nt,"$page",r),S=()=>D(I,"$blogs",r),l=()=>D(f,"$debouncedSearchInput",r),_=()=>D(P,"$totalPages",r),T=new URLSearchParams(u().url.search).get("limit");let I=x([]),P=x(0),A=x(0),$=x(!0),p=tt("");const f=bt(M(p),500);f.subscribe(t=>{console.log("debouncedSearchInput value changed",t)});const v=async({page:t,limit:o,search:m})=>{k.set(!0),$.set(!0);try{console.log("search",m);const n=await J.getBlogs({page:t,limit:o,search:m});P.set(n.totalPages),A.set(n.totalBlogs),I.set(n.blogs)}catch(n){console.log(n)}finally{k.set(!1),$.set(!1)}},B=async t=>{let o=et(()=>T||C.DEFAULT_LIMIT);await lt(`?page=${t}&limit=${M(o)}`)};X(()=>{const t=new URLSearchParams(u().url.search),o=t.get("page"),m=t.get("limit");v({page:o?Number(o):C.DEFAULT_PAGE,limit:m?Number(m):C.DEFAULT_LIMIT,search:M(p)})});var b=ht(),y=s(a(b),2),c=a(y);ot(c);var h=s(c,2),E=a(h);w(()=>Y(E,"href",j.blog.create())),e(h),e(y);var d=s(y,2);at(d,5,S,st,(t,o)=>{vt(t,{fetchData:()=>{v({page:1,limit:10,search:l()})},get blog(){return M(o)}})}),e(d);var O=s(d,2);mt(O,{get totalPages(){return _()},onPageChange:B}),e(b),rt(c,()=>M(p),t=>Z(p,t)),N(g,b),z()}export{Vt as component};
